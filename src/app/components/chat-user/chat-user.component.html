<div class="breadcumb_area bg-img" style="background-image: url(../assets/img/bg-img/breadcumb.jpg);">
        <div class="container h-100">
            <div class="row h-100 align-items-center">
                <div class="col-12">
                    <div class="page-title text-center">
                        <h2>Chat de Asistencia</h2>
                    </div>
                </div>
            </div>
        </div>
</div>

<div class="container">
	<div class="row" *ngIf="!idRoomUser; then selected else chatBox"></div>
		<ng-template #selected>
			<div class="col-md-10 col-md-offset-10" style="margin-top: 120px">
			<div class="form-group">
    			<label for="exampleFormControlTextarea1">Elije al operador que te ayudara</label>
   			 	<select class="form-control" name="exampleFormControlTextarea1" [(ngModel)]="slcHelpDesk">
   			 		<option *ngFor="let hp of helpDeskList" value="{{hp.ID}}">{{hp.NAME + ' ' + hp.LASTNAME}}</option>
   			 	</select>
  			</div>
  			<div class="col col-xs-6 text-right">
                <button type="button" (click)="CreateRoom()" class="btn btn-sm btn-primary btn-create">Empezar Chat</button>
            </div>
		</div>
		</ng-template>
		<ng-template #chatBox>
			<div class="messaging">
		      <div class="inbox_msg">
		        <div class="inbox_people">
		          <div class="inbox_chat">
		            <div class="chat_list active_chat">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		            <div class="chat_list">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		            <div class="chat_list">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		            <div class="chat_list">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		            <div class="chat_list">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		            <div class="chat_list">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		            <div class="chat_list">
		              <div class="chat_people">
		                <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
		                <div class="chat_ib">
		                  <h5>Sunil Rajput <span class="chat_date">Dec 25</span></h5>
		                  <p>Test, which is a new approach to have all solutions 
		                    astrology under one roof.</p>
		                </div>
		              </div>
		            </div>
		          </div>
		        </div>
		        <div class="mesgs">
		          <div class="msg_history">
		            <div *ngFor="let item of messages" [ngClass]="{
		            	'incoming_msg': user.id !== item.transmitter,
		            	'outgoing_msg': user.id === item.transmitter 
		        	}">
		        			<div *ngIf="user.id == item.transmitter" class="sent_msg">
		                		<p>{{item.content}}</p>
		              		</div>
		              		<ng-container *ngIf="user.id != item.transmitter">
		              			<div class="incoming_msg_img"> <img src="{{'http://192.168.43.109:3700/api/get-image/' + item.photo}}" alt="sunil"> </div>
					              <div class="received_msg">
					                <div class="received_withd_msg">
					                  <p>{{item.content}}</p></div>
					              </div>
		              		</ng-container>
		        	</div>

		          </div>
		          <div class="type_msg">
		            <div class="input_msg_write">
		              <input type="text" class="write_msg" [(ngModel)]="textMsg" placeholder="Type a message" />
		              <button class="msg_send_btn" type="button" (click)="SendMessage()"><i class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
		            </div>
		          </div>
		        </div>
		      </div>
		      <button class="btn btn-primary" (click)="InitializeModel()">Terminar ayuda</button>
    </div>
    </ng-template>	
</div>

<div class="modal fade" id="modalScore" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Calificación</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <h6>Porfavor califique la atención del help desk: {{nameHelpDesk}}, donde 1 es malo y 10 excelente</h6>
                            <label for="slcMS">Calificación: </label>
                            <select name="slcMS" class="form-control" id="slModalStock">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" (click)="ConfirmScore()" class="btn btn-primary">Calificar</button>
                          </div>
                        </div>
                      </div>
                    </div>
